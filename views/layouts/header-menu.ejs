<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/png" href="/images/favicon.png">
  <title>Ruedas Industriales Durango</title>
  <link href="/styles/styles.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
</head>

<body class="h-screen overflow-hidden bg-gray-100">

  <header class="fixed top-0 left-0 w-full h-14 bg-[#FF5100] text-white z-50">
    <div class="flex items-center h-full px-2">

      <button id="menuBtn" class="shrink-0 px-4 text-2xl md:hidden">
        <i class="fa-solid fa-bars"></i>
      </button>

      <div class="flex-1 overflow-x-auto md:overflow-visible no-scrollbar">
        <div class="flex items-center gap-6 min-w-max md:min-w-0">

          <%- include('../components/topIcon',{icon:'fa-house',label:'Inicio',to:'/'}) %>
            <%- include('../components/topIcon',{icon:'fa-users',label:'Usuarios',to:'/usuarios'}) %>
              <%- include('../components/topIcon',{icon:'fa-box',label:'Inventario',to:'/inventario'}) %>
                <%- include('../components/topIcon',{icon:'fa-file-invoice',label:'Facturación',to:'/facturacion'}) %>
                  <%- include('../components/topIcon',{icon:'fa-bag-shopping',label:'Ventas',to:'/ventas'}) %>

        </div>
      </div>

      <div class="hidden md:flex items-center gap-4 ml-auto">
        <div class="flex items-center space-x-2">
          <img src="/images/user.jpg" class="h-8 w-8 rounded-full">
          <div class="leading-tight text-[13px]">
            <p class="font-medium">Nombre de Usuario</p>
            <p class=" text-black font-bold">Rol</p>
          </div>
        </div>

        <div class="text-right text-[13px]">
          <p id="fecha"></p>
          <p id="hora"></p>
        </div>
      </div>

    </div>
  </header>

  <div class="flex h-screen bg-gray-100 pt-14">

    <aside id="sidebar" class="fixed h-full md:top-16 md:left-0 border border-gray-400/50 z-40 w-64 md:h-[calc(100vh-4.5rem)] bg-white overflow-y-auto
         transform transition-transform duration-300 -translate-x-full md:translate-x-0">

      <% let hasMenu=false; %>

        <%- include('../components/menuSection',{ title:'Usuarios', items:[{ label:'Lista', to:'/usuarios' }], path,
          setMenu: ()=> { hasMenu = true }
          }) %>

          <%- include('../components/menuSection',{ title:'Inventario', items:[{ label:'Productos', to:'/inventario' }],
            path, setMenu: ()=> { hasMenu = true }
            }) %>

            <%- include('../components/menuSection',{ title:'Facturas de Clientes', items:[ { label:'Facturas',
              to:'/facturacion' }, { label:'Nueva Factura', to:'/facturacion/nueva' }, { label:'Pagos',
              to:'/facturacion/pagos' } ], path, setMenu: ()=> { hasMenu = true }
              }) %>

            <%- include('../components/menuSection',{ title:'Ventas', items:[ { label:'Ventas Registradas',
                  to:'/ventas' }, { label:'Nueva Venta', to:'/ventas/nueva' } ], path, forceShow:
                  path.startsWith('/tickets') || path.startsWith('/ventas') }) %>

            <%- include('../components/menuSection',{ title:'Tickets', items:[{ label:'Tickets Registrados',
                to:'/tickets' }], path, forceShow: path.startsWith('/tickets') || path.startsWith('/ventas') }) %>

    </aside>

    <div id="overlay" class="fixed inset-0 bg-black/40 z-30 hidden md:hidden"></div>

    <main class="ml-0 md:ml-64 flex flex-col flex-1 overflow-hidden">

      <div class="flex-1 overflow-y-auto pt-2 pb-2 pr-4 pl-4 ">
        <div class="bg-white border border-gray-400/50 rounded shadow p-4 md:p-6 min-h-full flex flex-col">
          <%- body %>
        </div>
      </div>

      <footer class="h-14 border bg-gray-400 flex items-center justify-center gap-4 text-sm md:text-lg">
        <span>© 2026 - Ruedas Industriales Durango</span>
        <i class="fa-brands fa-facebook text-xl"></i>
        <i class="fa-brands fa-whatsapp text-xl"></i>
        <i class="fa-brands fa-instagram text-xl"></i>
      </footer>

    </main>
  </div>

  <script src="/js/global.js"></script>
  <script src="/js/header-menu.js"></script>

  <!-- Librerías pdf -->
  <script src="/libs/html2canvas.min.js"></script>
  <script src="/libs/jspdf.umd.min.js"></script>

  <script>
    const { jsPDF } = window.jspdf;
  </script>

  <script src="/js/generar-ticket-PDF.js"></script>
  <script src="/js/ticket-preview.js"></script>

</body>

</html>